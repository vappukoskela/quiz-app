(this["webpackJsonpquiz-app"]=this["webpackJsonpquiz-app"]||[]).push([[0],{159:function(e,t,n){},161:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),i=n.n(r),s=n(10),c=n.n(s),o=(n(159),n(44)),u=n(13),l=n(11),d=n.n(l),j=n(21),b=n(12),x=(n(161),n(257)),O=n(260),p=n(262),h=n(68),f=n(224),g=n(263),m=n(264),v=n(226),w=n(227),q=n(279),z=n(266),k=n(267),I=n(268),y=n(269),C=n(128),E=n.n(C),Q=n(40),N=n(127),T=new(n.n(N).a)({en:{login:"Login",register:"Register",email:"Email",password:"Password",reglink:"Register here",firstname:"First name",surname:"Surname",adminuser:"Admin user",teachermode:"Teacher mode",showcorrect:"Show correct answers",hidecorrect:"Hide correct answers",question:"Question",answer:"Answer",addnewquestion:"Add new question",addnewanswer:"Add new answer",addnewquiz:"Add new quiz",delete:"Delete",regerror:"Registration failed",files:"Files",deleting:"Deleting",areyousuredelete:"Are you sure you want to delete this quiz?",actioncannotbeundone:"This action cannot be undone!",cancel:"Cancel",logout:"Logout",landingtext:"Please log in or register to continue",loginfail:"Login failed",loginsuccess:"Login successful! Welcome",registersuccess:"Registration successful! Welcome",registerfail:"Registration failed",greet:"Hello",userinrole:"User in role",language:"Language settings"},fi:{login:"Kirjaudu",register:"Rekister\xf6idy",email:"S\xe4hk\xf6posti",password:"Salasana",reglink:"Rekister\xf6idy t\xe4st\xe4",firstname:"Etunimi",surname:"Sukunimi",adminuser:"Admin-k\xe4ytt\xe4j\xe4",teachermode:"Opettaja",showcorrect:"N\xe4yt\xe4 oikeat vastaukset",hidecorrect:"Piilota oikeat vastaukset",question:"Kysymys",answer:"Vastaus",addnewquestion:"Lis\xe4\xe4 uusi kysymys",addnewanswer:"Lis\xe4\xe4 uusi vastaus",addnewquiz:"Lis\xe4\xe4 uusi tentti",delete:"Poista",regerror:"Rekister\xf6ityminen ep\xe4onnistui",files:"Tiedostot",deleting:"Poistetaan",areyousuredelete:"Oletko varma, ett\xe4 haluat poistaa t\xe4m\xe4n tentin?",actioncannotbeundone:"T\xe4t\xe4 toimintoa ei voi peruuttaa!",cancel:"Peruuta",logout:"Kirjaudu ulos",landingtext:"Kirjauduthan sis\xe4\xe4n jatkaaksesi",loginfail:"Kirjautuminen ep\xe4onnistui",loginsuccess:"Kirjautuminen onnistui! Tervetuloa",registersuccess:"Rekister\xf6ityminen onnistui! Tervetuloa",registerfail:"Rekister\xf6ityminen ep\xe4onnistui",greet:"Hei",userinrole:"K\xe4ytt\xe4j\xe4 roolissa",language:"Kieliasetukset"}}),S=Object(x.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},lanselect:{margin:e.spacing(1),width:"70px",paddingInlineStart:"15px"},list:{width:250},fullList:{width:"auto"},menuitem:{width:"inherit"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightBold},nameHeader:{fontSize:e.typography.pxToRem(20),fontWeight:e.typography.fontWeightBold}}}));var A=function(e){T.setLanguage(e.language);var t=S(),n=Object(r.useState)(!1),s=Object(b.a)(n,2),c=s[0],o=s[1];return Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsx)(O.a,{position:"fixed",children:Object(a.jsxs)(p.a,{children:[Object(a.jsx)(f.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return o(!0)},children:Object(a.jsx)(E.a,{})}),Object(a.jsx)(h.a,{variant:"h6",className:t.title,children:Object(a.jsx)(Q.b,{to:"/",style:{textDecoration:"none",color:"white"},children:"Quiz App"})}),e.isLoggedIn?Object(a.jsx)(g.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){return e.logOut()},children:T.logout}):Object(a.jsx)(Q.b,{to:"/",style:{textDecoration:"none"},children:Object(a.jsx)(g.a,{variant:"contained",color:"primary",disableElevation:!0,children:T.login})})]})}),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(m.a,{open:c,onClose:function(){return o(!1)},children:Object(a.jsxs)(v.a,{className:t.list,children:[Object(a.jsx)(w.a,{children:Object(a.jsx)(h.a,{className:t.heading,children:Object(a.jsx)("b",{children:"Quiz App"})})}),e.isLoggedIn?Object(a.jsxs)("div",{children:[Object(a.jsxs)(w.a,{className:t.nameHeader,children:[e.user.firstname," ",e.user.surname]}),Object(a.jsx)(w.a,{children:Object(a.jsx)("i",{children:e.user.email})})]}):"",Object(a.jsxs)(q.a,{children:[Object(a.jsx)(z.a,{children:Object(a.jsx)(h.a,{className:t.heading,children:T.language})}),Object(a.jsx)(k.a,{children:Object(a.jsxs)(I.a,{className:t.list,children:[Object(a.jsx)(y.a,{value:"en",selected:"en"===e.language,onClick:function(t){return e.switchLanguage("en")},children:" English "}),Object(a.jsx)(y.a,{value:"fi",selected:"fi"===e.language,onClick:function(t){return e.switchLanguage("fi")},children:" Suomi "})]})})]})]})})},"menudrawer")]})},D=n(81),_=n.n(D),L=n(133),R=n.n(L),G=n(276),H=n(93),W=n(19),B=n.n(W),U=n(277),K=n(278),P=n(16),F=function(e){var t=Object(r.useState)({firstname:"",surname:"",email:"",password:"",role_id:2}),n=Object(b.a)(t,2),i=n[0],s=n[1],c=Object(r.useState)(!0),l=Object(b.a)(c,2),d=l[0],j=l[1],x=Object(r.useState)(!1),O=Object(b.a)(x,2),p=(O[0],O[1],Object(r.useState)("")),h=Object(b.a)(p,2),f=h[0],m=(h[1],function(e,t){s(Object(u.a)(Object(u.a)({},i),{},Object(o.a)({},t,e.target.value)))});Object(r.useEffect)((function(){s(d?Object(u.a)(Object(u.a)({},i),{},{role_id:2}):Object(u.a)(Object(u.a)({},i),{},{role_id:3}))}),[d]);return Object(a.jsx)("div",{className:"container",children:e.isRegistered?Object(a.jsx)(P.a,{to:"/"}):Object(a.jsxs)(v.a,{children:[Object(a.jsx)(w.a,{children:Object(a.jsx)("h2",{children:T.register})}),Object(a.jsx)(w.a,{children:Object(a.jsx)(U.a,{onChange:function(e){return m(e,"firstname")},size:"small",label:T.firstname,variant:"outlined"})}),Object(a.jsx)(w.a,{children:Object(a.jsx)(U.a,{onChange:function(e){return m(e,"surname")},size:"small",label:T.surname,variant:"outlined"})}),Object(a.jsx)(w.a,{children:Object(a.jsx)(U.a,{onChange:function(e){return m(e,"email")},size:"small",label:T.email,variant:"outlined"})}),Object(a.jsx)(w.a,{children:Object(a.jsx)(U.a,{onChange:function(e){return m(e,"password")},size:"small",label:T.password,type:"password",variant:"outlined"})}),Object(a.jsxs)(w.a,{children:[Object(a.jsx)(K.a,{checked:d,onChange:function(e){return j(!d)}})," ",T.adminuser,"?"]}),Object(a.jsx)(w.a,{children:Object(a.jsx)(g.a,{variant:"outlined",onClick:function(){console.log(i),e.submitRegistration(i)},children:T.register})}),Object(a.jsx)(w.a,{className:"errorMessage",children:f})]})})},X=n(56),Z=n.n(X),J=n(131),M=n.n(J),V=n(134),$=n(130),Y=n.n($);var ee=function(e){var t={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},n={borderColor:"#2196f3"},i={borderColor:"#00e676"},s={borderColor:"#ff1744"},c=Object(r.useCallback)(function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),n=Y.a.post("http://localhost:5000/upload"),t.forEach((function(e){n.attach("file",e),console.log(e)})),n.end((function(e,t){console.log("THIS IS THE RES",t)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),o=Object(V.a)({onDrop:c}),l=o.acceptedFiles,b=o.getRootProps,x=o.getInputProps,O=o.isDragActive,p=o.isDragAccept,h=o.isDragReject,f=Object(r.useMemo)((function(){return Object(u.a)(Object(u.a)(Object(u.a)(Object(u.a)({},t),O?n:{}),p?i:{}),h?s:{})})),g=l.map((function(e){return Object(a.jsxs)("li",{children:[e.path," - ",e.size," bytes"]},e.path)}));return Object(a.jsxs)("section",{children:[Object(a.jsxs)("div",Object(u.a)(Object(u.a)({},b({style:f})),{},{children:[Object(a.jsx)("input",Object(u.a)({},x())),O?Object(a.jsx)("p",{children:"Drop the files here ..."}):Object(a.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"})]})),Object(a.jsxs)("aside",{children:[Object(a.jsx)("ul",{children:T.files}),Object(a.jsx)("ul",{children:g})]})]})};var te=function(e){var t=Object(r.useState)(!1),n=Object(b.a)(t,2),i=n[0],s=n[1];return Object(a.jsxs)("div",{children:[Object(a.jsxs)(w.a,{role:void 0,dense:!0,children:[Object(a.jsx)(U.a,{fullWidth:!0,onChange:function(t){return e.updateQuestion(t,e.quiz,e.parentIndex)},size:"small",label:T.question+" "+(e.parentIndex+1),variant:"outlined",value:e.value.question}),Object(a.jsx)(g.a,{className:"deleteButton",onClick:function(t){return e.deleteQuestion(t,e.quiz,e.parentIndex)},children:Object(a.jsx)(Z.a,{})}),Object(a.jsx)(g.a,{className:"deleteButton",onClick:function(e){s(!i)},children:Object(a.jsx)(M.a,{})})]},e.value.id),Object(a.jsx)(w.a,{children:i?Object(a.jsx)(ee,{}):""})]})},ne=n(270),ae=n(6),re=n(82);var ie=function(e){var t=Object(ae.a)({root:{color:re.a[400],"&$checked":{color:re.a[600]}},checked:{}})((function(e){return Object(a.jsx)(K.a,Object(u.a)({color:"default"},e))}));return Object(a.jsxs)(w.a,{role:void 0,dense:!0,children:[Object(a.jsx)(ne.a,{children:Object(a.jsx)(t,{onChange:function(t){return e.updateAnsweroption(t,e.quiz,e.parentIndex,e.index,"CHECKBOX")},checked:e.value.correct,edge:"start",tabIndex:-1})}),Object(a.jsx)(ne.a,{children:Object(a.jsx)(K.a,{onChange:function(t){return e.dispatch({type:"SELECT_TOGGLE",data:{newText:t.target.value,quizIndex:e.quiz,questionIndex:e.parentIndex,answerIndex:e.index}})},checked:e.value.selected,edge:"start",tabIndex:-1})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(U.a,{onChange:function(t){return e.updateAnsweroption(t,e.quiz,e.parentIndex,e.index,"TEXT")},size:"small",label:T.answer+" "+(e.index+1),variant:"outlined",value:e.value.answer}),Object(a.jsx)(g.a,{className:"deleteButton",onClick:function(t){return e.deleteAnsweroption(t,e.quiz,e.parentIndex,e.index)},children:Object(a.jsx)(Z.a,{})})]})]},"editansweropt"+e.value.id)},se=n(271);var ce=function(e){var t=Object(ae.a)({root:{color:re.a[400],"&$checked":{color:re.a[600]}},checked:{}})((function(e){return Object(a.jsx)(K.a,Object(u.a)({color:"default"},e))}));return Object(a.jsxs)(w.a,{role:void 0,dense:!0,children:[Object(a.jsx)(ne.a,{children:e.answersVisible?Object(a.jsx)(t,{checked:e.value.correct,edge:"start",tabIndex:-1,disabled:!0}):null}),Object(a.jsx)(ne.a,{children:Object(a.jsx)(K.a,{checked:e.value.selected,edge:"start",tabIndex:-1})}),Object(a.jsx)("div",{children:Object(a.jsx)(se.a,{id:e.index,primary:e.value.answer})})]},e.value.id)},oe=function(e){var t=Object(r.useState)({email:"",password:""}),n=Object(b.a)(t,2),i=n[0],s=n[1],c=function(e,t){s(Object(u.a)(Object(u.a)({},i),{},Object(o.a)({},t,e.target.value)))};return Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)(v.a,{children:[Object(a.jsx)(w.a,{children:Object(a.jsx)("h2",{children:T.login})}),Object(a.jsx)(w.a,{children:Object(a.jsx)(U.a,{onChange:function(e){return c(e,"email")},size:"small",label:T.email,variant:"outlined"})}),Object(a.jsx)(w.a,{children:Object(a.jsx)(U.a,{onChange:function(e){return c(e,"password")},size:"small",label:T.password,type:"password",variant:"outlined"})}),Object(a.jsx)(w.a,{children:Object(a.jsx)(g.a,{variant:"outlined",onClick:function(){e.submitLogin(i)},children:T.login})}),Object(a.jsx)(w.a,{children:Object(a.jsx)(Q.b,{to:"/register",children:Object(a.jsx)("i",{children:T.reglink})})})]})})},ue=n(67),le=n(132),de=n.n(le),je=n(272),be=n(275),xe=n(274),Oe=n(273);var pe=function(e){var t=i.a.useState(!1),n=Object(b.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)(""),u=Object(b.a)(o,2),l=u[0],d=u[1],j=function(){c(!1)};return Object(a.jsxs)("div",{children:[Object(a.jsxs)(g.a,{onClick:function(){c(!0)},children:[Object(a.jsx)(_.a,{})," Add new quiz "]}),Object(a.jsxs)(je.a,{open:s,onClose:j,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(Oe.a,{id:"form-dialog-title",children:"Create New Quiz"}),Object(a.jsx)(xe.a,{children:Object(a.jsx)(U.a,{autoFocus:!0,margin:"dense",id:"name",label:"Quiz name",fullWidth:!0,onChange:function(e){return d(e.target.value)}})}),Object(a.jsxs)(be.a,{children:[Object(a.jsx)(g.a,{onClick:j,color:"primary",children:"Cancel"}),Object(a.jsx)(g.a,{onClick:function(t){j(),e.addNewQuiz(l)},color:"primary",children:"Create new quiz"})]})]})]})};var he=function(e){var t=i.a.useState(!1),n=Object(b.a)(t,2),r=n[0],s=n[1],c=function(){s(!1)};return Object(a.jsx)(w.a,{role:void 0,dense:!0,children:Object(a.jsxs)("div",{children:[Object(a.jsx)(U.a,{onChange:function(t){return e.updateQuiz(t,e.quizindex)},size:"small",variant:"outlined",value:e.quizname}),Object(a.jsx)(g.a,{className:"deleteButton",onClick:function(){s(!0)},children:Object(a.jsx)(Z.a,{})}),Object(a.jsxs)(je.a,{open:r,onClose:c,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(Oe.a,{id:"form-dialog-title",children:[T.deleting," ",e.quizname]}),Object(a.jsxs)(xe.a,{children:[Object(a.jsx)("p",{children:T.areyousuredelete}),Object(a.jsx)("p",{children:Object(a.jsx)("u",{children:T.actioncannotbeundone})})]}),Object(a.jsxs)(be.a,{children:[Object(a.jsx)(g.a,{onClick:c,color:"primary",children:T.cancel}),Object(a.jsx)(g.a,{onClick:function(t){c(),e.deleteQuiz(t,e.quizindex)},color:"secondary",children:T.delete})]})]})]})},"editquiztitlecomp"+e.quizid)};var fe=function(e){return Object(a.jsx)(w.a,{children:Object(a.jsx)("div",{children:Object(a.jsx)("h2",{children:e.quizname})})},"editquiztitlecomp")},ge="",me=Object(x.a)((function(e){return{root:{width:"100%",maxWidth:"100%",backgroundColor:e.palette.background.paper,"& > *":{margin:e.spacing(1)}}}})),ve=null;function we(e,t){var n=JSON.parse(JSON.stringify(e));switch(t.type){case"increment":return{count:e.count+1};case"INIT_DATA":return console.log(t),t.data;case"ANSWER_CHANGED":return n[t.data.quizIndex].quizQuestions[t.data.questionIndex].answerOptions[t.data.answerIndex].answer=t.data.newText,n;case"QUESTION_CHANGED":return n[t.data.quizIndex].quizQuestions[t.data.questionIndex].question=t.data.newText,n;case"QUIZ_CHANGED":return n[t.data.quizIndex].quizname=t.data.newText,n;case"ADD_ANSWER":var a={answer:"",correct:!1,selected:!1,id:t.data.id};return n[t.data.quizIndex].quizQuestions[t.data.questionIndex].answerOptions.push(a),n;case"ADD_QUESTION":var r={question:"",answerOptions:[],id:t.data.id};return n[t.data.quizIndex].quizQuestions.push(r),n;case"ADD_QUIZ":var i={id:t.data.quizId,quizname:t.data.quizname,quizQuestions:[]};return n.push(i),n;case"DELETE_ANSWER":return n[t.data.quizIndex].quizQuestions[t.data.questionIndex].answerOptions.splice(t.data.answerIndex,1),n;case"DELETE_QUESTION":return n[t.data.quizIndex].quizQuestions.splice(t.data.questionIndex,1),n;case"DELETE_QUIZ":return n.splice(t.data.quizIndex,1),n;case"SELECT_TOGGLE":return n[t.data.quizIndex].quizQuestions[t.data.questionIndex].answerOptions[t.data.answerIndex].selected=!n[t.data.quizIndex].quizQuestions[t.data.questionIndex].answerOptions[t.data.answerIndex].selected,n;case"CORRECT_TOGGLE":return n[t.data.quizIndex].quizQuestions[t.data.questionIndex].answerOptions[t.data.answerIndex].correct=!n[t.data.quizIndex].quizQuestions[t.data.questionIndex].answerOptions[t.data.answerIndex].correct,n;default:throw new Error}}ve="https://vappus-quiz-app.herokuapp.com/",ge="https://vappus-quiz-app.herokuapp.com";var qe=Object(ue.c)((function(){var e=me(),t=Object(r.useState)(!1),n=Object(b.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)(0),u=Object(b.a)(o,2),l=u[0],x=u[1],O=Object(r.useState)(!1),p=Object(b.a)(O,2),h=p[0],f=p[1],m=Object(r.useReducer)(we,[]),w=Object(b.a)(m,2),q=w[0],z=w[1],k=Object(r.useState)(!1),I=Object(b.a)(k,2),y=I[0],C=I[1],E=Object(r.useState)(!1),Q=Object(b.a)(E,2),N=Q[0],S=Q[1],D=Object(r.useState)("en"),L=Object(b.a)(D,2),W=L[0],U=L[1],K=Object(ue.b)().enqueueSnackbar,X=Object(r.useState)(localStorage.getItem("jwtToken")),Z=Object(b.a)(X,2),J=Z[0],M=Z[1],V=Object(r.useState)({firstname:"",surname:"",email:"",id:null,role_id:null}),$=Object(b.a)(V,2),Y=$[0],ee=$[1];Object(r.useEffect)((function(){console.log("TOKEN ",J),C(null!==J),y&&(console.log(y),ne())}),[y,J]);var ne=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.get(ve+"user?secret_token="+J).then((function(e){ee(e.data),console.log("gotUser"+e.data),2==e.data.role_id&&S(!0),C(!0)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("error getting user",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n={email:t.email,password:t.password,firstname:t.firstname,surname:t.surname,role_id:t.role_id},console.log(n),e.prev=3,e.next=6,B.a.post(ve+"register/",n).then((function(e){var n=T.registersuccess;K(n,{variant:"success"}),ee(t),2==t.role_id&&S(!0),C(!0)}));case 6:e.next=13;break;case 8:e.prev=8,e.t0=e.catch(3),a=T.registerfail,K(a,{variant:"error"}),console.log("registration error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n={email:t.email,password:t.password},console.log(n),e.prev=3,e.next=6,B.a.post(ve+"login/",n).then((function(e){console.log(e,"LOGIN RESPONSE"),localStorage.setItem("jwtToken",e.data.token),ee({firstname:e.data.userObj.firstname,surname:e.data.userObj.surname,id:e.data.userObj.surname,role_id:e.data.userObj.role_id,email:e.data.userObj.username}),2==e.data.userObj.role_id&&S(!0),C(!0),M(e.data.token);var t=T.loginsuccess;K(t,{variant:"success"})}));case 6:e.next=13;break;case 8:e.prev=8,e.t0=e.catch(3),a=T.loginfail,K(a,{variant:"error"}),console.log("login error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e=de()(ge);e.on("connected",(function(t){console.log("CONNECTED"),e.emit("ready for data",{}),K("Socket connected!")})),e.on("update",(function(e){var t="";switch(console.log("UPDATED",e.message.payload),e.message.channel){case"addquiz":t="New Quiz: "+e.message.payload;break;case"adduser":t=e.message.payload+" just registered for the first time!";break;case"alterquiz":var n=JSON.parse(e.message.payload);console.log("hi from here"),console.log(n),t="Quiz: "+n.old+" was renamed to "+n.new;break;case"addedrecord":t="this is a test!"}K(t)}))}),[]),Object(r.useEffect)((function(){(function(){var e=Object(j.a)(d.a.mark((function e(){var t,n,a,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.get(ve+"quiz");case 3:if(!((t=e.sent).data.length>0)){e.next=31;break}n=0;case 6:if(!(n<t.data.length)){e.next=26;break}return t.data[n].quizQuestions=[],e.next=10,B.a.get(ve+"quiz/"+t.data[n].id+"/question/");case 10:if(a=e.sent,t.data[n].quizQuestions=a.data,!(t.data[n].quizQuestions.length>0)){e.next=23;break}r=0;case 14:if(!(r<t.data[n].quizQuestions.length)){e.next=23;break}return t.data[n].quizQuestions[r].answerOptions=[],e.next=18,B.a.get(ve+"quiz/"+t.data[n].id+"/question/"+t.data[n].quizQuestions[r].id+"/answer");case 18:i=e.sent,t.data[n].quizQuestions[r].answerOptions=i.data;case 20:r++,e.next=14;break;case 23:n++,e.next=6;break;case 26:console.log(t.data),z({type:"INIT_DATA",data:t.data}),c(!0),e.next=32;break;case 31:throw"No data :(";case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(0),console.log(e.t0);case 37:case"end":return e.stop()}}),e,null,[[0,34]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var se=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=q[n].id,r={},e.prev=2,e.next=5,B.a.post(ve+"quiz/"+a,r).then((function(e){console.log("new id"+e.data.id),z({type:"ADD_QUESTION",data:{quizIndex:l,id:e.data.id}})}));case 5:e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),le=function(){var e=Object(j.a)(d.a.mark((function e(t,n,a){var r,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=q[n].id,i=q[n].quizQuestions[a].id,s={correct:!1},e.prev=3,e.next=6,B.a.post(ve+"quiz/"+r+"/question/"+i,s).then((function(e){console.log("new id"+e.data.id),z({type:"ADD_ANSWER",data:{quizIndex:l,questionIndex:a,id:e.data.id}})}));case 6:e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,n,a){return e.apply(this,arguments)}}(),je=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={quizname:t},e.prev=1,e.next=4,B.a.post(ve+"quiz/",n).then((function(e){console.log("new id"+e.data.id),z({type:"ADD_QUIZ",data:{quizId:e.data.id,quizname:t}})}));case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.target.value),a=q[n].id,r={quizname:t.target.value},e.prev=3,e.next=6,B.a.put(ve+"quiz/"+a,r);case 6:e.sent,z({type:"QUIZ_CHANGED",data:{newText:r.quizname,quizIndex:n}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n){return e.apply(this,arguments)}}(),xe=function(){var e=Object(j.a)(d.a.mark((function e(t,n,a){var r,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=q[n].id,i=q[n].quizQuestions[a].id,s={question:t.target.value},e.prev=3,e.next=6,B.a.put(ve+"quiz/"+r+"/question/"+i,s);case 6:e.sent,z({type:"QUESTION_CHANGED",data:{newText:s.question,quizIndex:n,questionIndex:a}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(j.a)(d.a.mark((function e(t,n,a,r,i){var s,c,o,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=q[n].id,c=q[n].quizQuestions[a].id,o=q[n].quizQuestions[a].answerOptions[r].id,u={},e.t0=i,e.next="TEXT"===e.t0?7:"CHECKBOX"===e.t0?10:13;break;case 7:return u.answer=t.target.value,u.correct=q[n].quizQuestions[a].answerOptions[r].correct,e.abrupt("break",16);case 10:return u.answer=q[n].quizQuestions[a].answerOptions[r].answer,u.correct=!q[n].quizQuestions[a].answerOptions[r].correct,e.abrupt("break",16);case 13:return u.answer=q[n].quizQuestions[a].answerOptions[r].answer,u.correct=q[n].quizQuestions[a].answerOptions[r].correct,e.abrupt("break",16);case 16:return e.prev=16,e.next=19,B.a.put(ve+"quiz/"+s+"/question/"+c+"/answer/"+o,u);case 19:e.sent,e.t1=i,e.next="TEXT"===e.t1?23:"CHECKBOX"===e.t1?25:27;break;case 23:return z({type:"ANSWER_CHANGED",data:{newText:u.answer,quizIndex:n,questionIndex:a,answerIndex:r}}),e.abrupt("break",28);case 25:return z({type:"CORRECT_TOGGLE",data:{newText:u.answer,quizIndex:n,questionIndex:a,answerIndex:r}}),e.abrupt("break",28);case 27:return e.abrupt("break",28);case 28:e.next=33;break;case 30:e.prev=30,e.t2=e.catch(16),console.log(e.t2);case 33:case"end":return e.stop()}}),e,null,[[16,30]])})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),qe=function(){var e=Object(j.a)(d.a.mark((function e(t,n,a){var r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=q[n].id,i=q[n].quizQuestions[a].id,e.prev=2,e.next=5,B.a.delete(ve+"quiz/"+r+"/question/"+i);case 5:e.sent,z({type:"DELETE_QUESTION",data:{newText:"",quizIndex:l,questionIndex:a}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,a){return e.apply(this,arguments)}}(),ze=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=q[n].id,e.prev=1,x(0),e.next=5,B.a.delete(ve+"quiz/"+a);case 5:e.sent,z({type:"DELETE_QUIZ",data:{newText:"",quizIndex:n}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),ke=function(){var e=Object(j.a)(d.a.mark((function e(t,n,a,r){var i,s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=q[n].id,s=q[n].quizQuestions[a].id,c=q[n].quizQuestions[a].answerOptions[r].id,e.prev=3,e.next=6,B.a.delete(ve+"quiz/"+i+"/question/"+s+"/answer/"+c);case 6:e.sent,z({type:"DELETE_ANSWER",data:{newText:"",quizIndex:l,questionIndex:a,answerIndex:r}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Ie=i.a.useState({teacherMode:!1}),ye=Object(b.a)(Ie,2),Ce=ye[0];return ye[1],Object(a.jsx)("div",{children:Object(a.jsxs)(G.a,{className:"quizContainer",children:[Object(a.jsx)(A,{switchLanguage:function(e){U(e),T.setLanguage(e)},user:Y,isLoggedIn:y,logOut:function(){ee({firstname:"",surname:"",id:null,role_id:null,email:""}),C(!1),S(!1),M(null),localStorage.removeItem("jwtToken")},language:W}),Object(a.jsxs)(P.d,{children:[Object(a.jsx)(P.b,{exact:!0,path:"/register",component:function(){return Object(a.jsx)(F,{submitRegistration:ae,isRegistered:y})}}),Object(a.jsx)(P.b,{exact:!0,path:"/",children:y?Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"greetingContainer",children:Object(a.jsxs)("p",{className:"greeting",children:[T.greet,", ",Y.firstname," ",Y.surname,Object(a.jsx)("br",{}),T.userinrole,": ",Y.role_id]})}),Object(a.jsxs)("div",{className:e.root,children:[s?q.map((function(e,t){return Object(a.jsx)(g.a,{variant:"outlined",onClick:function(){x(t)},children:e.quizname})})):null,N&&s?Object(a.jsx)("div",{children:Object(a.jsx)(pe,{addNewQuiz:je})}):""]}),s?Object(a.jsx)("div",{className:"questionCard",children:Object(a.jsx)(H.a,{elevation:1,padding:"10%",children:N?Object(a.jsx)(he,{quizname:q[l].quizname,quizid:q[l].id,quizindex:l,updateQuiz:be,deleteQuiz:ze}):Object(a.jsx)(fe,{quizname:q[l].quizname})})}):"",s?q[l].quizQuestions.map((function(t,n){return Object(a.jsx)("div",{className:"questionCard",children:Object(a.jsx)(H.a,{elevation:1,children:Object(a.jsxs)(v.a,{className:e.root,children:[Object(a.jsx)("h3",{children:t.topicArea}),N?Object(a.jsx)(te,{value:t,quiz:l,parentIndex:n,updateQuestion:xe,deleteQuestion:qe}):Object(a.jsx)("div",{className:"question",children:t.question}),t.answerOptions.map((function(e,t){return Object(a.jsx)("div",{children:N?Object(a.jsx)(ie,{value:e,quiz:l,parentIndex:n,index:t,status:Ce,updateAnsweroption:Oe,deleteAnsweroption:ke,dispatch:z}):Object(a.jsx)(ce,{value:e,quiz:l,parentIndex:n,index:t,answersVisible:h})})})),N?Object(a.jsx)("div",{className:"addButton",children:Object(a.jsx)(g.a,{onClick:function(e){return le(e,l,n)},children:Object(a.jsx)(_.a,{})})}):""]})})})})):null,Object(a.jsx)("div",{className:"bottomButtons",children:N?Object(a.jsxs)(g.a,{variant:"contained",onClick:function(e){return se(e,l)},children:[Object(a.jsx)(R.a,{}),"   ",T.addnewquestion]}):Object(a.jsx)(g.a,{variant:"contained",onClick:function(){f(!h)},children:h?T.hidecorrect:T.showcorrect})})]}):Object(a.jsx)(oe,{submitLogin:re,isLoggedIn:y})})]})]})})})),ze=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,280)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};c.a.render(Object(a.jsx)(Q.a,{children:Object(a.jsx)(ue.a,{maxSnack:3,variant:"info",children:Object(a.jsx)(qe,{})})}),document.getElementById("root")),ze()}},[[223,1,2]]]);
//# sourceMappingURL=main.66a6e4e3.chunk.js.map