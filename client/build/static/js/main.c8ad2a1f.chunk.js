(this["webpackJsonpquiz-app"]=this["webpackJsonpquiz-app"]||[]).push([[0],{160:function(e,t,n){},162:function(e,t,n){},225:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),i=n.n(r),s=n(11),c=n.n(s),o=(n(160),n(10)),u=n.n(o),d=n(20),l=n(12),j=(n(162),n(259)),b=n(262),x=n(264),p=n(68),O=n(226),h=n(265),f=n(266),g=n(228),m=n(229),v=n(281),w=n(268),q=n(269),z=n(270),k=n(271),I=n(129),y=n.n(I),Q=n(41),E=n(128),C=new(n.n(E).a)({en:{login:"Login",register:"Register",email:"Email",password:"Password",reglink:"Register here",firstname:"First name",surname:"Surname",adminuser:"Admin user",teachermode:"Teacher mode",showcorrect:"Show correct answers",hidecorrect:"Hide correct answers",question:"Question",answer:"Answer",addnewquestion:"Add new question",addnewanswer:"Add new answer",addnewquiz:"Add new quiz",delete:"Delete",regerror:"Registration failed",files:"Files",deleting:"Deleting",areyousuredelete:"Are you sure you want to delete this quiz?",actioncannotbeundone:"This action cannot be undone!",cancel:"Cancel",logout:"Logout",landingtext:"Please log in or register to continue",loginfail:"Login failed",loginsuccess:"Login successful! Welcome",registersuccess:"Registration successful! Welcome",registerfail:"Registration failed",greet:"Hello",userinrole:"User in role",language:"Language settings",admin:"admin",student:"student",quizname:"Quiz title",correct:"Correct"},fi:{login:"Kirjaudu",register:"Rekister\xf6idy",email:"S\xe4hk\xf6posti",password:"Salasana",reglink:"Rekister\xf6idy t\xe4st\xe4",firstname:"Etunimi",surname:"Sukunimi",adminuser:"Admin-k\xe4ytt\xe4j\xe4",teachermode:"Opettaja",showcorrect:"N\xe4yt\xe4 oikeat vastaukset",hidecorrect:"Piilota oikeat vastaukset",question:"Kysymys",answer:"Vastaus",addnewquestion:"Lis\xe4\xe4 uusi kysymys",addnewanswer:"Lis\xe4\xe4 uusi vastaus",addnewquiz:"Lis\xe4\xe4 uusi tentti",delete:"Poista",regerror:"Rekister\xf6ityminen ep\xe4onnistui",files:"Tiedostot",deleting:"Poistetaan",areyousuredelete:"Oletko varma, ett\xe4 haluat poistaa t\xe4m\xe4n tentin?",actioncannotbeundone:"T\xe4t\xe4 toimintoa ei voi peruuttaa!",cancel:"Peruuta",logout:"Kirjaudu ulos",landingtext:"Kirjauduthan sis\xe4\xe4n jatkaaksesi",loginfail:"Kirjautuminen ep\xe4onnistui",loginsuccess:"Kirjautuminen onnistui! Tervetuloa",registersuccess:"Rekister\xf6ityminen onnistui! Tervetuloa",registerfail:"Rekister\xf6ityminen ep\xe4onnistui",greet:"Hei",userinrole:"K\xe4ytt\xe4j\xe4 roolissa",language:"Kieliasetukset",admin:"admin",student:"oppilas",quizname:"Tentin otsikko",correct:"Oikein"}}),S=Object(j.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},lanselect:{margin:e.spacing(1),width:"70px",paddingInlineStart:"15px"},list:{width:250},fullList:{width:"auto"},menuitem:{width:"inherit"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightBold},nameHeader:{fontSize:e.typography.pxToRem(20),fontWeight:e.typography.fontWeightBold}}}));var N=function(e){C.setLanguage(e.language);var t=S(),n=Object(r.useState)(!1),s=Object(l.a)(n,2),c=s[0],o=s[1];return Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsx)(b.a,{position:"fixed",children:Object(a.jsxs)(x.a,{children:[Object(a.jsx)(O.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return o(!0)},children:Object(a.jsx)(y.a,{})}),Object(a.jsx)(p.a,{variant:"h6",className:t.title,children:Object(a.jsx)(Q.b,{to:"/",style:{textDecoration:"none",color:"white"},children:"Quiz App"})}),e.isLoggedIn?Object(a.jsx)(h.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){return e.logOut()},children:C.logout}):Object(a.jsx)(Q.b,{to:"/",style:{textDecoration:"none"},children:Object(a.jsx)(h.a,{variant:"contained",color:"primary",disableElevation:!0,children:C.login})})]})}),Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(f.a,{open:c,onClose:function(){return o(!1)},children:Object(a.jsxs)(g.a,{className:t.list,children:[Object(a.jsx)(m.a,{children:Object(a.jsx)(p.a,{className:t.heading,children:Object(a.jsx)("b",{children:"Quiz App"})})},"appname"),e.isLoggedIn?Object(a.jsxs)("div",{children:[Object(a.jsxs)(m.a,{className:t.nameHeader,children:[e.user.firstname," ",e.user.surname]},""),Object(a.jsx)(m.a,{children:Object(a.jsx)("i",{children:e.user.email})}),Object(a.jsx)(m.a,{children:"2"===e.user.role_id?Object(a.jsxs)("i",{children:[C.admin," "]}):Object(a.jsxs)("i",{children:[" ",C.student]})})]}):"",Object(a.jsxs)(v.a,{children:[Object(a.jsx)(w.a,{children:Object(a.jsx)(p.a,{className:t.heading,children:C.language})}),Object(a.jsx)(q.a,{children:Object(a.jsxs)(z.a,{className:t.list,children:[Object(a.jsx)(k.a,{value:"en",selected:"en"===e.language,onClick:function(t){return e.switchLanguage("en")},children:" English "}),Object(a.jsx)(k.a,{value:"fi",selected:"fi"===e.language,onClick:function(t){return e.switchLanguage("fi")},children:" Suomi "})]})})]})]})})},"menudrawer")]})},T=n(81),A=n.n(T),D=n(134),_=n.n(D),R=n(278),L=n(95),U=n(19),B=n.n(U),H=n(55),W=n(15),G=n(279),P=n(280),K=n(16),F=function(e){var t=Object(r.useState)({firstname:"",surname:"",email:"",password:"",role_id:2}),n=Object(l.a)(t,2),i=n[0],s=n[1],c=Object(r.useState)(!0),o=Object(l.a)(c,2),u=o[0],d=o[1],j=function(e,t){s(Object(W.a)(Object(W.a)({},i),{},Object(H.a)({},t,e.target.value)))};Object(r.useEffect)((function(){s(u?Object(W.a)(Object(W.a)({},i),{},{role_id:2}):Object(W.a)(Object(W.a)({},i),{},{role_id:3}))}),[u]);return Object(a.jsx)("div",{className:"container",children:e.isRegistered?Object(a.jsx)(K.a,{to:"/"}):Object(a.jsxs)(g.a,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("h2",{children:C.register})}),Object(a.jsx)(m.a,{children:Object(a.jsx)(G.a,{onChange:function(e){return j(e,"firstname")},size:"small",label:C.firstname,variant:"outlined"})}),Object(a.jsx)(m.a,{children:Object(a.jsx)(G.a,{onChange:function(e){return j(e,"surname")},size:"small",label:C.surname,variant:"outlined"})}),Object(a.jsx)(m.a,{children:Object(a.jsx)(G.a,{onChange:function(e){return j(e,"email")},size:"small",label:C.email,variant:"outlined"})}),Object(a.jsx)(m.a,{children:Object(a.jsx)(G.a,{onChange:function(e){return j(e,"password")},size:"small",label:C.password,type:"password",variant:"outlined"})}),Object(a.jsxs)(m.a,{children:[Object(a.jsx)(P.a,{checked:u,onChange:function(e){return d(!u)}})," ",C.adminuser,"?"]}),Object(a.jsx)(m.a,{children:Object(a.jsx)(h.a,{variant:"outlined",onClick:function(){console.log(i),e.submitRegistration(i)},children:C.register})})]})})},X=n(56),Z=n.n(X),J=n(132),V=n.n(J),$=n(135),M=n(131),Y=n.n(M);var ee=function(e){var t={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},n={borderColor:"#2196f3"},i={borderColor:"#00e676"},s={borderColor:"#ff1744"},c=Object(r.useCallback)(function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),n=Y.a.post("http://localhost:5000/upload"),t.forEach((function(e){n.attach("file",e),console.log(e)})),n.end((function(e,t){console.log("THIS IS THE RES",t)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),o=Object($.a)({onDrop:c}),l=o.acceptedFiles,j=o.getRootProps,b=o.getInputProps,x=o.isDragActive,p=o.isDragAccept,O=o.isDragReject,h=Object(r.useMemo)((function(){return Object(W.a)(Object(W.a)(Object(W.a)(Object(W.a)({},t),x?n:{}),p?i:{}),O?s:{})})),f=l.map((function(e){return Object(a.jsxs)("li",{children:[e.path," - ",e.size," bytes"]},e.path)}));return Object(a.jsxs)("section",{children:[Object(a.jsxs)("div",Object(W.a)(Object(W.a)({},j({style:h})),{},{children:[Object(a.jsx)("input",Object(W.a)({},b())),x?Object(a.jsx)("p",{children:"Drop the files here ..."}):Object(a.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"})]})),Object(a.jsxs)("aside",{children:[Object(a.jsx)("ul",{children:C.files}),Object(a.jsx)("ul",{children:f})]})]})};var te=function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),i=n[0],s=n[1],c=Object(r.useState)(e.value.question),o=Object(l.a)(c,2),u=o[0],d=o[1];return Object(a.jsxs)("div",{children:[Object(a.jsxs)(m.a,{role:void 0,dense:!0,children:[Object(a.jsx)(G.a,{fullWidth:!0,onChange:function(e){return d(e.target.value)},onBlur:function(t){return e.updateQuestion(t,e.quiz,e.parentIndex)},size:"small",label:C.question+" "+(e.parentIndex+1),variant:"outlined",value:u}),Object(a.jsx)(h.a,{className:"deleteButton",onClick:function(t){return e.deleteQuestion(t,e.quiz,e.parentIndex)},children:Object(a.jsx)(Z.a,{})}),Object(a.jsx)(h.a,{className:"deleteButton",onClick:function(e){s(!i)},children:Object(a.jsx)(V.a,{})})]},e.value.id),Object(a.jsx)(m.a,{children:i?Object(a.jsx)(ee,{}):""})]})},ne=n(272),ae=n(6),re=n(82);var ie=function(e){var t=Object(ae.a)({root:{color:re.a[400],"&$checked":{color:re.a[600]}},checked:{}})((function(e){return Object(a.jsx)(P.a,Object(W.a)({color:"default"},e))})),n=Object(r.useState)(e.value.answer),i=Object(l.a)(n,2),s=i[0],c=i[1];return Object(a.jsxs)(m.a,{role:void 0,dense:!0,children:[Object(a.jsx)(ne.a,{children:Object(a.jsx)(t,{onChange:function(t){return e.updateAnsweroption(t,e.quiz,e.parentIndex,e.index,"CHECKBOX")},checked:e.value.correct,edge:"start",tabIndex:-1})}),Object(a.jsx)(ne.a,{children:Object(a.jsx)(P.a,{onChange:function(t){return e.updateUseranswer(t,e.quiz,e.parentIndex,e.index)},checked:e.value.selected,edge:"start",tabIndex:-1})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(G.a,{onChange:function(e){return c(e.target.value)},onBlur:function(t){return e.updateAnsweroption(t,e.quiz,e.parentIndex,e.index,"TEXT")},size:"small",label:C.answer+" "+(e.index+1),variant:"outlined",value:s}),Object(a.jsx)(h.a,{className:"deleteButton",onClick:function(t){return e.deleteAnsweroption(t,e.quiz,e.parentIndex,e.index)},children:Object(a.jsx)(Z.a,{})})]})]},"editansweropt"+e.value.id)},se=n(273);var ce=function(e){var t=Object(ae.a)({root:{color:re.a[400],"&$checked":{color:re.a[600]}},checked:{}})((function(e){return Object(a.jsx)(P.a,Object(W.a)({color:"default"},e))}));return Object(a.jsxs)(m.a,{role:void 0,dense:!0,children:[Object(a.jsx)(ne.a,{children:e.answersVisible?Object(a.jsx)(t,{checked:e.value.correct,edge:"start",tabIndex:-1,disabled:!0}):null}),Object(a.jsx)(ne.a,{children:Object(a.jsx)(P.a,{onChange:function(t){return e.updateUseranswer(t,e.quiz,e.parentIndex,e.index)},checked:e.value.selected,edge:"start",tabIndex:-1})}),Object(a.jsx)("div",{children:Object(a.jsx)(se.a,{id:e.index,primary:e.value.answer})})]},e.value.id)},oe=function(e){var t=Object(r.useState)({email:"",password:""}),n=Object(l.a)(t,2),i=n[0],s=n[1],c=function(e,t){s(Object(W.a)(Object(W.a)({},i),{},Object(H.a)({},t,e.target.value)))};return Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)(g.a,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("h2",{children:C.login})}),Object(a.jsx)(m.a,{children:Object(a.jsx)(G.a,{onChange:function(e){return c(e,"email")},size:"small",label:C.email,variant:"outlined"})}),Object(a.jsx)(m.a,{children:Object(a.jsx)(G.a,{onChange:function(e){return c(e,"password")},size:"small",label:C.password,type:"password",variant:"outlined"})}),Object(a.jsx)(m.a,{children:Object(a.jsx)(h.a,{variant:"outlined",onClick:function(){e.submitLogin(i)},children:C.login})}),Object(a.jsx)(m.a,{children:Object(a.jsx)(Q.b,{to:"/register",children:Object(a.jsx)("i",{children:C.reglink})})})]})})},ue=n(67),de=n(133),le=n.n(de),je=n(274),be=n(277),xe=n(276),pe=n(275);var Oe=function(e){var t=i.a.useState(!1),n=Object(l.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)(""),u=Object(l.a)(o,2),d=u[0],j=u[1],b=function(){c(!1)};return Object(a.jsxs)("div",{children:[Object(a.jsxs)(h.a,{onClick:function(){c(!0)},children:[Object(a.jsx)(A.a,{})," Add new quiz "]}),Object(a.jsxs)(je.a,{open:s,onClose:b,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(pe.a,{id:"form-dialog-title",children:"Create New Quiz"}),Object(a.jsx)(xe.a,{children:Object(a.jsx)(G.a,{autoFocus:!0,margin:"dense",id:"name",label:"Quiz name",fullWidth:!0,onChange:function(e){return j(e.target.value)}})}),Object(a.jsxs)(be.a,{children:[Object(a.jsx)(h.a,{onClick:b,color:"primary",children:"Cancel"}),Object(a.jsx)(h.a,{onClick:function(t){b(),e.addNewQuiz(d)},color:"primary",children:"Create new quiz"})]})]})]})};var he=function(e){var t=i.a.useState(!1),n=Object(l.a)(t,2),s=n[0],c=n[1],o=function(){c(!1)},u=Object(r.useState)(e.quizname),d=Object(l.a)(u,2),j=d[0],b=d[1];return Object(a.jsx)(m.a,{role:void 0,dense:!0,children:Object(a.jsxs)("div",{children:[Object(a.jsx)(G.a,{onChange:function(e){return b(e.target.value)},onBlur:function(t){return e.updateQuiz(t,e.quizindex)},label:C.quizname,size:"small",variant:"outlined",value:j}),Object(a.jsx)(h.a,{className:"deleteButton",onClick:function(){c(!0)},children:Object(a.jsx)(Z.a,{})}),Object(a.jsxs)(je.a,{open:s,onClose:o,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(pe.a,{id:"form-dialog-title",children:[C.deleting," ",e.quizname]}),Object(a.jsxs)(xe.a,{children:[Object(a.jsx)("p",{children:C.areyousuredelete}),Object(a.jsx)("p",{children:Object(a.jsx)("u",{children:C.actioncannotbeundone})})]}),Object(a.jsxs)(be.a,{children:[Object(a.jsx)(h.a,{onClick:o,color:"primary",children:C.cancel}),Object(a.jsx)(h.a,{onClick:function(t){o(),e.deleteQuiz(t,e.quizindex)},color:"secondary",children:C.delete})]})]})]})},"editquiztitlecomp"+e.quizid)};var fe=function(e){return Object(a.jsx)(m.a,{children:Object(a.jsx)("div",{children:Object(a.jsx)("h2",{children:e.quizname})})},"editquiztitlecomp")};var ge=n(94),me="",ve=Object(j.a)((function(e){return{root:{width:"100%",maxWidth:"100%",backgroundColor:e.palette.background.paper,"& > *":{margin:e.spacing(1)}}}})),we=null;function qe(e,t){var n=JSON.parse(JSON.stringify(e));switch(t.type){case"INIT_DATA":return t.data;case"ANSWER_CHANGED":return n[t.data.quizIndex].quizQuestions[t.data.questionIndex].answerOptions[t.data.answerIndex].answer=t.data.newText,n;case"QUESTION_CHANGED":return n[t.data.quizIndex].quizQuestions[t.data.questionIndex].question=t.data.newText,n;case"QUIZ_CHANGED":return n[t.data.quizIndex].quizname=t.data.newText,n;case"ADD_ANSWER":var a={answer:"",correct:!1,selected:!1,id:t.data.id};return n[t.data.quizIndex].quizQuestions[t.data.questionIndex].answerOptions.push(a),n;case"ADD_QUESTION":var r={question:"",answerOptions:[],id:t.data.id};return n[t.data.quizIndex].quizQuestions.push(r),n;case"ADD_QUIZ":var i={id:t.data.quizId,quizname:t.data.quizname,quizQuestions:[]};return n.push(i),n;case"DELETE_ANSWER":return n[t.data.quizIndex].quizQuestions[t.data.questionIndex].answerOptions.splice(t.data.answerIndex,1),n;case"DELETE_QUESTION":return n[t.data.quizIndex].quizQuestions.splice(t.data.questionIndex,1),n;case"DELETE_QUIZ":return n.splice(t.data.quizIndex,1),n;case"SELECT_TOGGLE":return n[t.data.quizIndex].quizQuestions[t.data.questionIndex].answerOptions[t.data.answerIndex].selected=!n[t.data.quizIndex].quizQuestions[t.data.questionIndex].answerOptions[t.data.answerIndex].selected,n;case"CORRECT_TOGGLE":return n[t.data.quizIndex].quizQuestions[t.data.questionIndex].answerOptions[t.data.answerIndex].correct=!n[t.data.quizIndex].quizQuestions[t.data.questionIndex].answerOptions[t.data.answerIndex].correct,n;case"USERANSWER_CHANGED":return n[t.data.quizIndex].quizQuestions[t.data.questionIndex].answerOptions[t.data.answerIndex].selected=t.data.selected,n;case"UPDATE_POINTS":return n[t.data.quizIndex].quizQuestions[t.data.questionIndex].points=t.data.points,n[t.data.quizIndex].quizQuestions[t.data.questionIndex].correctOptions=t.data.correctOptions,console.log(n),n;default:throw new Error}}we="https://vappus-quiz-app.herokuapp.com/",me="https://vappus-quiz-app.herokuapp.com";var ze=Object(ue.c)((function(){var e=ve(),t=Object(r.useState)(!1),n=Object(l.a)(t,2),i=n[0],s=n[1],c=Object(r.useState)(null),o=Object(l.a)(c,2),j=o[0],b=o[1],x=Object(r.useState)(!1),p=Object(l.a)(x,2),O=p[0],f=p[1],m=Object(r.useReducer)(qe,[]),v=Object(l.a)(m,2),w=v[0],q=v[1],z=Object(r.useState)(!1),k=Object(l.a)(z,2),I=k[0],y=k[1],Q=Object(r.useState)(!1),E=Object(l.a)(Q,2),S=E[0],T=E[1],D=Object(r.useState)("en"),U=Object(l.a)(D,2),H=U[0],W=U[1],G=Object(ue.b)().enqueueSnackbar,P=Object(r.useState)(localStorage.getItem("jwtToken")),X=Object(l.a)(P,2),Z=X[0],J=X[1],V=Object(r.useState)({firstname:"",surname:"",email:"",id:null,role_id:null}),$=Object(l.a)(V,2),M=$[0],Y=$[1];Object(r.useEffect)((function(){console.log("TOKEN ",Z),null===Z?y(!1):(y(!0),ee())}),[I,Z]);var ee=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.get(we+"user?secret_token="+Z).then((function(e){Y({firstname:e.data.firstname,surname:e.data.surname,email:e.data.username,id:e.data.id,role_id:e.data.role_id}),2==e.data.role_id&&T(!0),y(!0)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("error getting user",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(ge.toLower)(t.email),console.log(t),a={email:n,password:t.password,firstname:t.firstname,surname:t.surname,role_id:t.role_id},console.log(a),e.prev=4,e.next=7,B.a.post(we+"register/",a).then((function(e){var n=C.registersuccess;G(n,{variant:"success"}),2==t.role_id&&T(!0),Y(t),y(!0)}));case 7:e.next=14;break;case 9:e.prev=9,e.t0=e.catch(4),r=C.registerfail,G(r,{variant:"error"}),console.log("registration error",e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(ge.toLower)(t.email),a={email:n,password:t.password},console.log(a),e.prev=3,e.next=6,B.a.post(we+"login/",a).then((function(e){console.log(e,"LOGIN RESPONSE"),localStorage.setItem("jwtToken",e.data.token),Y({firstname:e.data.userObj.firstname,surname:e.data.userObj.surname,email:e.data.userObj.username,id:e.data.userObj.id,role_id:e.data.userObj.role_id}),2==e.data.userObj.role_id&&T(!0),y(!0),J(e.data.token);var t=C.loginsuccess;G(t,{variant:"success"})}));case 6:e.next=13;break;case 8:e.prev=8,e.t0=e.catch(3),r=C.loginfail,G(r,{variant:"error"}),console.log("login error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e=le()(me);e.on("connected",(function(t){e.emit("ready for data",{}),G("Socket connected!")})),e.on("update",(function(e){var t="";switch(e.message.channel){case"addquiz":t="New Quiz: "+e.message.payload;break;case"adduser":t=e.message.payload+" just registered for the first time!";break;case"alterquiz":var n=JSON.parse(e.message.payload);t="Quiz: "+n.old+" was renamed to "+n.new}G(t)}))}),[]),Object(r.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,a,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.get(we+"quiz");case 3:if(!((t=e.sent).data.length>0)){e.next=32;break}n=0;case 6:if(!(n<t.data.length)){e.next=28;break}return t.data[n].quizQuestions=[],e.next=10,B.a.get(we+"quiz/"+t.data[n].id+"/question/");case 10:if(a=e.sent,t.data[n].quizQuestions=a.data,!(t.data[n].quizQuestions.length>0)){e.next=25;break}r=0;case 14:if(!(r<t.data[n].quizQuestions.length)){e.next=25;break}return t.data[n].quizQuestions[r].answerOptions=[],e.next=18,B.a.get(we+"useranswer/"+M.id+"/question/"+t.data[n].quizQuestions[r].id+"/answer");case 18:i=e.sent,t.data[n].quizQuestions[r].answerOptions=i.data,t.data[n].quizQuestions[r].points=0,t.data[n].quizQuestions[r].correctOptions=0;case 22:r++,e.next=14;break;case 25:n++,e.next=6;break;case 28:q({type:"INIT_DATA",data:t.data}),s(!0),e.next=33;break;case 32:throw"No data :(";case 33:e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),console.log("fetchData exception",e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(){return e.apply(this,arguments)}})()()}),[M]);var re=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=w[n].id,r={},e.prev=2,e.next=5,B.a.post(we+"quiz/"+a,r).then((function(e){console.log("new id"+e.data.id),q({type:"ADD_QUESTION",data:{quizIndex:j,id:e.data.id}})}));case 5:e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),se=function(){var e=Object(d.a)(u.a.mark((function e(t,n,a){var r,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=w[n].id,i=w[n].quizQuestions[a].id,s={correct:!1},e.prev=3,e.next=6,B.a.post(we+"quiz/"+r+"/question/"+i,s).then((function(e){console.log("new id"+e.data.id),q({type:"ADD_ANSWER",data:{quizIndex:j,questionIndex:a,id:e.data.id}})}));case 6:e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,n,a){return e.apply(this,arguments)}}(),de=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={quizname:t},e.prev=1,e.next=4,B.a.post(we+"quiz/",n).then((function(e){console.log("new id"+e.data.id),q({type:"ADD_QUIZ",data:{quizId:e.data.id,quizname:t}})}));case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.target.value),a=w[n].id,r={quizname:t.target.value},e.prev=3,e.next=6,B.a.put(we+"quiz/"+a,r);case 6:e.sent,q({type:"QUIZ_CHANGED",data:{newText:r.quizname,quizIndex:n}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n){return e.apply(this,arguments)}}(),be=function(){var e=Object(d.a)(u.a.mark((function e(t,n,a){var r,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=w[n].id,i=w[n].quizQuestions[a].id,s={question:t.target.value},e.prev=3,e.next=6,B.a.put(we+"quiz/"+r+"/question/"+i,s);case 6:e.sent,q({type:"QUESTION_CHANGED",data:{newText:s.question,quizIndex:n,questionIndex:a}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n,a){return e.apply(this,arguments)}}(),xe=function(){var e=Object(d.a)(u.a.mark((function e(t,n,a,r,i){var s,c,o,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=w[n].id,c=w[n].quizQuestions[a].id,o=w[n].quizQuestions[a].answerOptions[r].id,console.log(w[n].quizQuestions[a].answerOptions[r]),d={},e.t0=i,e.next="TEXT"===e.t0?8:"CHECKBOX"===e.t0?11:14;break;case 8:return d.answer=t.target.value,d.correct=w[n].quizQuestions[a].answerOptions[r].correct,e.abrupt("break",17);case 11:return d.answer=w[n].quizQuestions[a].answerOptions[r].answer,d.correct=!w[n].quizQuestions[a].answerOptions[r].correct,e.abrupt("break",17);case 14:return d.answer=w[n].quizQuestions[a].answerOptions[r].answer,d.correct=w[n].quizQuestions[a].answerOptions[r].correct,e.abrupt("break",17);case 17:return e.prev=17,e.next=20,B.a.put(we+"quiz/"+s+"/question/"+c+"/answer/"+o,d);case 20:e.sent,e.t1=i,e.next="TEXT"===e.t1?24:"CHECKBOX"===e.t1?26:28;break;case 24:return q({type:"ANSWER_CHANGED",data:{newText:d.answer,quizIndex:n,questionIndex:a,answerIndex:r}}),e.abrupt("break",29);case 26:return q({type:"CORRECT_TOGGLE",data:{newText:d.answer,quizIndex:n,questionIndex:a,answerIndex:r}}),e.abrupt("break",29);case 28:return e.abrupt("break",29);case 29:e.next=34;break;case 31:e.prev=31,e.t2=e.catch(17),console.log(e.t2);case 34:case"end":return e.stop()}}),e,null,[[17,31]])})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),pe=function(){var e=Object(d.a)(u.a.mark((function e(t,n,a,r){var i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w[n].id,w[n].quizQuestions[a].id,i=w[n].quizQuestions[a].answerOptions[r].id,s={},null!==w[n].quizQuestions[a].answerOptions[r].selected){e.next=11;break}return s.selected=!0,e.next=8,B.a.post(we+"useranswers/"+M.id+"/answer/"+i,s);case 8:e.sent,e.next=15;break;case 11:return s.selected=!w[n].quizQuestions[a].answerOptions[r].selected,e.next=14,B.a.put(we+"useranswers/"+M.id+"/answer/"+i,s);case 14:e.sent;case 15:q({type:"USERANSWER_CHANGED",data:{selected:s.selected,quizIndex:n,questionIndex:a,answerIndex:r}}),console.log("update user answer",s.selected);case 17:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),ze=function(){var e=Object(d.a)(u.a.mark((function e(t,n,a){var r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=w[n].id,i=w[n].quizQuestions[a].id,e.prev=2,e.next=5,B.a.delete(we+"quiz/"+r+"/question/"+i);case 5:e.sent,q({type:"DELETE_QUESTION",data:{newText:"",quizIndex:j,questionIndex:a}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,a){return e.apply(this,arguments)}}(),ke=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=w[n].id,e.prev=1,b(null),e.next=5,B.a.delete(we+"quiz/"+a);case 5:e.sent,q({type:"DELETE_QUIZ",data:{newText:"",quizIndex:n}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(d.a)(u.a.mark((function e(t,n,a,r){var i,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=w[n].id,s=w[n].quizQuestions[a].id,c=w[n].quizQuestions[a].answerOptions[r].id,e.prev=3,e.next=6,B.a.delete(we+"quiz/"+i+"/question/"+s+"/answer/"+c);case 6:e.sent,q({type:"DELETE_ANSWER",data:{newText:"",quizIndex:j,questionIndex:a,answerIndex:r}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),ye=function(e){for(var t,n,a=w[e],r=0;r<a.quizQuestions.length;r++){for(var i=0;i<a.quizQuestions[r].answerOptions.length;i++)0===i&&(t=0,n=0),a.quizQuestions[r].answerOptions[i].correct&&(n++,a.quizQuestions[r].answerOptions[i].selected&&t++);q({type:"UPDATE_POINTS",data:{points:t,correctOptions:n,quizIndex:e,questionIndex:r}})}};return Object(a.jsx)("div",{children:Object(a.jsxs)(R.a,{className:"quizContainer",children:[Object(a.jsx)(N,{switchLanguage:function(e){W(e),C.setLanguage(e)},user:M,isLoggedIn:I,logOut:function(){Y({firstname:"",surname:"",email:"",id:null,role_id:null}),y(!1),T(!1),J(null),b(null),f(!1),localStorage.removeItem("jwtToken")},language:H}),Object(a.jsxs)(K.d,{children:[Object(a.jsx)(K.b,{exact:!0,path:"/register",component:function(){return Object(a.jsx)(F,{submitRegistration:ne,isRegistered:I})}}),Object(a.jsx)(K.b,{exact:!0,path:"/",children:I?Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:e.root,children:[i&&w.length>0?w.map((function(e,t){return Object(a.jsx)(h.a,{variant:"outlined",onClick:function(){return b(t)},children:e.quizname})})):null,S?Object(a.jsx)("div",{children:Object(a.jsx)(Oe,{addNewQuiz:de})}):""]}),null!=j?Object(a.jsx)("div",{className:"questionCard",children:Object(a.jsx)(L.a,{elevation:1,padding:"10%",children:S?Object(a.jsx)(he,{quizname:w[j].quizname,quizid:w[j].id,quizindex:j,updateQuiz:je,deleteQuiz:ke}):Object(a.jsx)(fe,{quizname:w[j].quizname})})}):"",null!=j?w[j].quizQuestions.map((function(t,n){return Object(a.jsx)("div",{className:"questionCard",children:Object(a.jsx)(L.a,{elevation:1,children:Object(a.jsxs)(g.a,{className:e.root,children:[Object(a.jsx)("h3",{children:t.topicArea}),S?Object(a.jsx)(te,{value:t,quiz:j,parentIndex:n,updateQuestion:be,deleteQuestion:ze}):Object(a.jsx)("div",{className:"question",children:t.question}),t.answerOptions.map((function(e,t){return Object(a.jsx)("div",{children:S?Object(a.jsx)(ie,{value:e,quiz:j,parentIndex:n,index:t,updateAnsweroption:xe,updateUseranswer:pe,deleteAnsweroption:Ie,dispatch:q}):Object(a.jsx)(ce,{updateUseranswer:pe,value:e,quiz:j,parentIndex:n,index:t,answersVisible:O})})})),O?Object(a.jsxs)("div",{children:[w[j].quizQuestions[n].points,"/",w[j].quizQuestions[n].correctOptions," ",C.correct]}):null,S?Object(a.jsx)("div",{className:"addButton",children:Object(a.jsx)(h.a,{onClick:function(e){return se(e,j,n)},children:Object(a.jsx)(A.a,{})})}):""]})})})})):null,Object(a.jsxs)("div",{className:"bottomButtons",children:[S&&null!=j?Object(a.jsxs)(h.a,{variant:"contained",onClick:function(e){return re(e,j)},children:[Object(a.jsx)(_.a,{}),"   ",C.addnewquestion]}):null,S||null==j?null:Object(a.jsx)(h.a,{variant:"contained",onClick:function(){return function(){f(!O),console.log(w);for(var e=0;e<w.length;e++)ye(e)}()},children:O?C.hidecorrect:C.showcorrect})]})]}):Object(a.jsx)(oe,{submitLogin:ae,isLoggedIn:I})})]})]})})})),ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,282)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};c.a.render(Object(a.jsx)(Q.a,{children:Object(a.jsx)(ue.a,{maxSnack:3,variant:"info",children:Object(a.jsx)(ze,{})})}),document.getElementById("root")),ke()}},[[225,1,2]]]);
//# sourceMappingURL=main.c8ad2a1f.chunk.js.map